# HeyGem AI æ•¸å­—äººç”Ÿæˆå¹³å°

ä¸€å€‹æ•´åˆäº†ç¾ä»£åŒ–å‰ç«¯ç•Œé¢å’Œå¼·å¤§å¾Œç«¯åŠŸèƒ½çš„ AI æ•¸å­—äººç”Ÿæˆå¹³å°ï¼Œæ”¯æ´å¤š TTS æœå‹™ã€å½±ç‰‡ç”Ÿæˆå’Œæ¨¡ç‰¹ç®¡ç†ã€‚

> ğŸ“‹ **å°ˆæ¡ˆçµæ§‹èªªæ˜**: è©³ç´°çš„ç›®éŒ„çµæ§‹å’Œé–‹ç™¼æŒ‡å—è«‹åƒè€ƒ [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md)

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

### å‰ç«¯ç•Œé¢
- **ç¾ä»£åŒ– React + TypeScript ç•Œé¢**ï¼šä½¿ç”¨ shadcn/ui çµ„ä»¶åº«
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šæ”¯æ´æ¡Œé¢å’Œè¡Œå‹•è£ç½®
- **å³æ™‚é è¦½**ï¼šæ”¯æ´éŸ³é »æ’­æ”¾å’Œå½±ç‰‡é è¦½
- **æ‹–æ‹½ä¸Šå‚³**ï¼šç›´è§€çš„æ–‡ä»¶ä¸Šå‚³é«”é©—

### æ ¸å¿ƒåŠŸèƒ½
- **æ¨¡ç‰¹ç®¡ç†**ï¼šå‰µå»ºã€ç·¨è¼¯ã€åˆªé™¤æ•¸å­—äººæ¨¡ç‰¹
- **èªéŸ³åˆæˆ**ï¼šåŸºæ–¼ Fish Speech çš„é«˜å“è³ª TTS
- **å½±ç‰‡ç”Ÿæˆ**ï¼šFace2Face æŠ€è¡“é©…å‹•çš„æ•¸å­—äººå½±ç‰‡
- **æ–‡ä»¶ç®¡ç†**ï¼šè‡ªå‹•æ¸…ç†å’Œå­˜å„²ç®¡ç†
- **ä»»å‹™è¿½è¹¤**ï¼šå³æ™‚æŸ¥çœ‹ç”Ÿæˆé€²åº¦

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
HeyGem Platform
â”œâ”€â”€ å‰ç«¯ (React + TypeScript)
â”‚   â”œâ”€â”€ é¦–é  - åŠŸèƒ½æ¦‚è¦½
â”‚   â”œâ”€â”€ æ¨¡ç‰¹ç®¡ç† - å‰µå»ºå’Œç®¡ç†æ•¸å­—äºº
â”‚   â”œâ”€â”€ å½±éŸ³ç”Ÿæˆå™¨ - ç”Ÿæˆæ•¸å­—äººå½±ç‰‡
â”‚   â””â”€â”€ ä½œå“åº« - æŸ¥çœ‹ç”Ÿæˆçµæœ
â”œâ”€â”€ å¾Œç«¯ (Express.js + TypeScript)
â”‚   â”œâ”€â”€ RESTful API
â”‚   â”œâ”€â”€ æ–‡ä»¶ä¸Šå‚³è™•ç†
â”‚   â”œâ”€â”€ æ¨¡ç‰¹æ•¸æ“šç®¡ç†
â”‚   â””â”€â”€ ä»»å‹™ç‹€æ…‹è¿½è¹¤
â””â”€â”€ AI æœå‹™
    â”œâ”€â”€ TTS æœå‹™ (Fish Speech)
    â”œâ”€â”€ Face2Face å½±ç‰‡ç”Ÿæˆ
    â””â”€â”€ ASR èªéŸ³è­˜åˆ¥ (å¯é¸)
```

## ğŸ› ï¸ æŠ€è¡“æ£§

### å‰ç«¯
- **React 18** - ç”¨æˆ¶ç•Œé¢æ¡†æ¶
- **TypeScript** - é¡å‹å®‰å…¨
- **Vite** - å¿«é€Ÿæ§‹å»ºå·¥å…·
- **shadcn/ui** - ç¾ä»£åŒ–çµ„ä»¶åº«
- **Tailwind CSS** - æ¨£å¼æ¡†æ¶
- **React Query** - æ•¸æ“šç‹€æ…‹ç®¡ç†
- **Wouter** - è¼•é‡ç´šè·¯ç”±

### å¾Œç«¯
- **Express.js** - Web æ¡†æ¶
- **TypeScript** - é¡å‹å®‰å…¨
- **Multer** - æ–‡ä»¶ä¸Šå‚³
- **fs-extra** - æ–‡ä»¶ç³»çµ±æ“ä½œ
- **Axios** - HTTP å®¢æˆ¶ç«¯

### AI æœå‹™
- **Fish Speech** - èªéŸ³åˆæˆ
- **Face2Face** - å½±ç‰‡ç”Ÿæˆ
- **CUDA** - GPU åŠ é€Ÿ

### åŸºç¤è¨­æ–½
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **Redis** - å¿«å–å’Œä»»å‹™éšŠåˆ—
- **PostgreSQL** - æ•¸æ“šæŒä¹…åŒ– (å¯é¸)
- **Nginx** - åå‘ä»£ç† (ç”Ÿç”¢ç’°å¢ƒ)

## ğŸ“¦ å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚
- Docker å’Œ Docker Compose
- NVIDIA GPU (ç”¨æ–¼ AI æœå‹™)
- NVIDIA Container Toolkit

### é–‹ç™¼ç’°å¢ƒ

1. **å…‹éš†å°ˆæ¡ˆ**
```bash
git clone <repository-url>
cd heygem-platform
```

2. **å•Ÿå‹•é–‹ç™¼æœå‹™**
```bash
# å•Ÿå‹•æ‰€æœ‰æœå‹™
docker compose up -d

# æˆ–è€…åªå•Ÿå‹• Web æ‡‰ç”¨ (ç”¨æ–¼å‰ç«¯é–‹ç™¼)
npm run dev
```

3. **è¨ªå•æ‡‰ç”¨**
- Web ç•Œé¢: http://localhost:5000
- TTS API: http://localhost:18180
- Redis: http://localhost:6379
- PostgreSQL: http://localhost:5432

### ç”Ÿç”¢ç’°å¢ƒ

1. **æ§‹å»ºå’Œéƒ¨ç½²**
```bash
# æ§‹å»ºæ‰€æœ‰æœå‹™
docker compose build

# å•Ÿå‹•æœå‹™
docker compose up -d
```

2. **æŸ¥çœ‹æœå‹™ç‹€æ…‹**
```bash
# æŸ¥çœ‹é‹è¡Œç‹€æ…‹
docker compose ps

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f
```

## ğŸ”§ é…ç½®èªªæ˜

### ç’°å¢ƒè®Šé‡
```bash
# æ‡‰ç”¨é…ç½®
NODE_ENV=production
PORT=5000

# AI æœå‹™ URL
TTS_URL=http://tts-server:18180
FACE2FACE_URL=http://face2face-server:8383/easy
ASR_URL=http://asr-server:10095

# æ•¸æ“šåº«é…ç½® (å¯é¸)
POSTGRES_DB=heygem
POSTGRES_USER=heygem_user
POSTGRES_PASSWORD=heygem_password

# Redis é…ç½®
REDIS_URL=redis://redis:6379
```

### æ–‡ä»¶æ¸…ç†é…ç½®
```javascript
FILE_CLEANUP_CONFIG = {
  "ENABLE_CLEANUP": true,
  "RESULT_FILE_TTL": 24 * 3600,  // 24å°æ™‚
  "UPLOAD_FILE_TTL": 3600,       // 1å°æ™‚
  "MAX_RESULT_FILES": 50,
  "MAX_UPLOAD_FILES": 20,
  "CLEANUP_INTERVAL": 3600,      // 1å°æ™‚
}
```

## ğŸ“š API æ–‡æª”

### æ¨¡ç‰¹ç®¡ç†
```bash
# ç²å–æ¨¡ç‰¹åˆ—è¡¨
GET /api/models?page=1&pageSize=20&name=&type=

# å‰µå»ºæ¨¡ç‰¹
POST /api/model/create
{
  "name": "æ¨¡ç‰¹åç¨±",
  "type": "person|voice",
  "description": "æè¿°",
  "videoPath": "å½±ç‰‡æ–‡ä»¶è·¯å¾‘",
  "audioPath": "éŸ³é »æ–‡ä»¶è·¯å¾‘"
}

# åˆªé™¤æ¨¡ç‰¹
DELETE /api/model/:id
```

### æ–‡ä»¶ä¸Šå‚³
```bash
# ä¸Šå‚³æ–‡ä»¶
POST /api/upload
Content-Type: multipart/form-data
{
  "file": <æ–‡ä»¶>,
  "type": "audio|video"
}
```

### å½±ç‰‡ç”Ÿæˆ
```bash
# æäº¤å½±ç‰‡ç”Ÿæˆä»»å‹™
POST /api/video/submit
{
  "audioPath": "éŸ³é »æ–‡ä»¶è·¯å¾‘",
  "videoPath": "å½±ç‰‡æ–‡ä»¶è·¯å¾‘",
  "options": {
    "chaofen": 0,
    "watermark": 0,
    "pn": 1
  }
}

# æŸ¥è©¢ä»»å‹™ç‹€æ…‹
GET /api/video/status/:taskCode
```

### TTS èªéŸ³åˆæˆ
```bash
# ç”ŸæˆèªéŸ³
POST /api/tts/generate
{
  "text": "è¦åˆæˆçš„æ–‡æœ¬",
  "voiceConfig": {
    "reference_audio": "åƒè€ƒéŸ³é »è·¯å¾‘",
    "reference_text": "åƒè€ƒæ–‡æœ¬"
  }
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **GPU ä¸å¯ç”¨**
```bash
# æª¢æŸ¥ NVIDIA é©…å‹•
nvidia-smi

# æª¢æŸ¥ Docker GPU æ”¯æ´
docker run --rm --gpus all nvidia/cuda:11.0-base nvidia-smi
```

2. **ç«¯å£è¡çª**
```bash
# æª¢æŸ¥ç«¯å£ä½¿ç”¨æƒ…æ³
netstat -tulpn | grep :5000

# ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„
```

3. **ä¾è³´å®‰è£å¤±æ•—**
```bash
# æ¸…ç† Docker å¿«å–
docker system prune -a

# é‡æ–°æ§‹å»º
docker-compose build --no-cache
```

### æ—¥èªŒæŸ¥çœ‹
```bash
# æŸ¥çœ‹æ‰€æœ‰æœå‹™æ—¥èªŒ
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒ
docker-compose logs -f heygem-web
docker-compose logs -f tts-server
docker-compose logs -f face2face-server
```

## ğŸ¤ é–‹ç™¼æŒ‡å—

### å‰ç«¯é–‹ç™¼
```bash
# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run dev

# æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬
npm run build

# é¡å‹æª¢æŸ¥
npm run check
```

### å¾Œç«¯é–‹ç™¼
```bash
# å•Ÿå‹•é–‹ç™¼æ¨¡å¼
npm run dev

# æ§‹å»º
npm run build

# å•Ÿå‹•ç”Ÿç”¢æ¨¡å¼
npm start
```

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ TypeScript é€²è¡Œé¡å‹æª¢æŸ¥
- éµå¾ª ESLint è¦å‰‡
- ä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç¢¼
- ç·¨å¯«å–®å…ƒæ¸¬è©¦

## ğŸ“„ æˆæ¬Šå”è­°

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šå”è­°ã€‚è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è¬

- [Fish Speech](https://github.com/fishaudio/fish-speech) - èªéŸ³åˆæˆæŠ€è¡“
- [shadcn/ui](https://ui.shadcn.com/) - UI çµ„ä»¶åº«
- [React](https://reactjs.org/) - å‰ç«¯æ¡†æ¶
- [Express.js](https://expressjs.com/) - å¾Œç«¯æ¡†æ¶

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æŸ¥çœ‹ [å¸¸è¦‹å•é¡Œ](docs/FAQ.md)
2. æäº¤ [Issue](https://github.com/your-repo/issues)
3. è¯ç¹«é–‹ç™¼åœ˜éšŠ

---

**HeyGem AI** - è®“æ•¸å­—äººå‰µä½œè®Šå¾—ç°¡å–®è€Œå¼·å¤§ ğŸš€
